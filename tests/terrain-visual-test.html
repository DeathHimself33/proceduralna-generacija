<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Terrain Visual Test</title>
<style>
  body { font-family: monospace; text-align: center; margin: 20px; }
  canvas { border: 1px solid #333; }
</style>
</head>
<body>

<h1>Terrain Height Map Visualization</h1>
<canvas id="terrainCanvas" width="256" height="256"></canvas>

<script type="module">
  import { generateHeightMap } from '../terrain.js';

  const canvas = document.getElementById('terrainCanvas');
  const ctx = canvas.getContext('2d');
  const width = canvas.width;
  const height = canvas.height;
  const scale = 4.0; // skaliranje Perlin buke - igraj se da vidi≈° razlike

  const heightMap = generateHeightMap(width, height, scale);

  const imageData = ctx.createImageData(width, height);
  const data = imageData.data;

  for (let y = 0; y < height; y++) {
    for (let x = 0; x < width; x++) {
      const val = heightMap[y][x];  // vrednost u [-1,1]
      // Mapiranje iz [-1, 1] u [0, 255]
      const brightness = Math.floor(((val + 1) / 2) * 255);

      const index = (y * width + x) * 4;
      data[index] = brightness;     // R kanal
      data[index + 1] = brightness; // G kanal
      data[index + 2] = brightness; // B kanal
      data[index + 3] = 255;        // Alpha kanal
    }
  }

  ctx.putImageData(imageData, 0, 0);
</script>

</body>
</html>
