<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Perlin Noise Visualization</title>
  <style>
    canvas {
      image-rendering: pixelated;
      border: 1px solid black;
    }
  </style>
</head>
<body>
  <canvas id="canvas" width="512" height="512"></canvas>

  <script type="module">
    import { fractalPerlin } from '../perlin.js'; // vodi računa o ispravnoj putanji!

    const canvas = document.getElementById('canvas');
    const ctx = canvas.getContext('2d');
    const imageData = ctx.createImageData(canvas.width, canvas.height);
    const data = imageData.data;

    const scale = 0.05; // manja vrednost = "zoom out", veća vrednost = "zoom in"

    for (let y = 0; y < canvas.height; y++) {
      for (let x = 0; x < canvas.width; x++) {
        const nx = x * scale;
        const ny = y * scale;
        const value = fractalPerlin(nx, ny, 6, 0.5); // vrednost je u opsegu približno [-1, 1]

        const normalized = Math.floor((value + 1) * 127.5); // pretvori u [0, 255]
        const index = (y * canvas.width + x) * 4;

        data[index] = normalized;     // R
        data[index + 1] = normalized; // G
        data[index + 2] = normalized; // B
        data[index + 3] = 255;        // A
      }
    }

    ctx.putImageData(imageData, 0, 0);
  </script>
</body>
</html>
